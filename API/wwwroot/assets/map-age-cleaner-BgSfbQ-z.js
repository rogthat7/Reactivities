import{r as w}from"./p-defer-BUV9kL4s.js";var d={exports:{}},s=d.exports,h;function g(){return h||(h=1,function(_,v){var x=s&&s.__awaiter||function(n,l,r,t){return new(r||(r=Promise))(function(i,o){function a(e){try{u(t.next(e))}catch(f){o(f)}}function p(e){try{u(t.throw(e))}catch(f){o(f)}}function u(e){e.done?i(e.value):new r(function(f){f(e.value)}).then(a,p)}u((t=t.apply(n,l||[])).next())})},y=s&&s.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(v,"__esModule",{value:!0});const D=y(w());function c(n,l="maxAge"){let r,t,i;const o=()=>x(this,void 0,void 0,function*(){if(r!==void 0)return;const u=e=>x(this,void 0,void 0,function*(){i=D.default();const f=e[1][l]-Date.now();if(f<=0){n.delete(e[0]),i.resolve();return}return r=e[0],t=setTimeout(()=>{n.delete(e[0]),i&&i.resolve()},f),typeof t.unref=="function"&&t.unref(),i.promise});try{for(const e of n)yield u(e)}catch{}r=void 0}),a=()=>{r=void 0,t!==void 0&&(clearTimeout(t),t=void 0),i!==void 0&&(i.reject(void 0),i=void 0)},p=n.set.bind(n);return n.set=(u,e)=>{n.has(u)&&n.delete(u);const f=p(u,e);return r&&r===u&&a(),o(),f},o(),n}v.default=c,_.exports=c,_.exports.default=c}(d,d.exports)),d.exports}export{g as r};
