import{r as l,e as L}from"./react-BwvqamFI.js";import{l as d}from"./leaflet-C5JgwxMT.js";import{c as v,L as E,a as P,b as m,e as T,d as R,f as z,u as S,w as h}from"./@react-leaflet-B4MuXkUT.js";import"./react-dom-Cr51qPG-.js";function j({bounds:i,boundsOptions:n,center:e,children:a,className:t,id:y,placeholder:u,style:s,whenReady:r,zoom:f,...p},b){const[w]=l.useState({className:t,id:y,style:s}),[o,I]=l.useState(null),g=l.useRef(void 0);l.useImperativeHandle(b,()=>(o==null?void 0:o.map)??null,[o]);const M=l.useCallback(C=>{if(C!==null&&!g.current){const c=new d.Map(C,p);g.current=c,e!=null&&f!=null?c.setView(e,f):i!=null&&c.fitBounds(i,n),r!=null&&c.whenReady(r),I(v(c))}},[]);l.useEffect(()=>()=>{o==null||o.map.remove()},[o]);const O=o?L.createElement(E,{value:o},a):u??null;return L.createElement("div",{...w,ref:M},O)}const U=l.forwardRef(j),V=P(function({position:n,...e},a){const t=new d.Marker(n,e);return m(t,T(a,{overlayContainer:t}))},function(n,e,a){e.position!==a.position&&n.setLatLng(e.position),e.icon!=null&&e.icon!==a.icon&&n.setIcon(e.icon),e.zIndexOffset!=null&&e.zIndexOffset!==a.zIndexOffset&&n.setZIndexOffset(e.zIndexOffset),e.opacity!=null&&e.opacity!==a.opacity&&n.setOpacity(e.opacity),n.dragging!=null&&e.draggable!==a.draggable&&(e.draggable===!0?n.dragging.enable():n.dragging.disable())}),Z=R(function(n,e){const a=new d.Popup(n,e.overlayContainer);return m(a,e)},function(n,e,{position:a},t){l.useEffect(function(){const{instance:u}=n;function s(f){f.popup===u&&(u.update(),t(!0))}function r(f){f.popup===u&&t(!1)}return e.map.on({popupopen:s,popupclose:r}),e.overlayContainer==null?(a!=null&&u.setLatLng(a),u.openOn(e.map)):e.overlayContainer.bindPopup(u),function(){var p;e.map.off({popupopen:s,popupclose:r}),(p=e.overlayContainer)==null||p.unbindPopup(),e.map.removeLayer(u)}},[n,e,t,a])}),k=z(function({url:n,...e},a){const t=new d.TileLayer(n,h(e,a));return m(t,a)},function(n,e,a){S(n,e,a);const{url:t}=e;t!=null&&t!==a.url&&n.setUrl(t)});export{U as M,Z as P,k as T,V as a};
