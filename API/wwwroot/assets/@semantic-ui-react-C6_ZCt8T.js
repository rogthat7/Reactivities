import{g as N}from"./@mui-BKdEY9HJ.js";import{r as z}from"./exenv-BS7ugsZD.js";import{a as D}from"./react-BqlbiFCO.js";var f={exports:{}},h={},S;function L(){if(S)return h;S=1,Object.defineProperty(h,"__esModule",{value:!0});var u=z(),T=D();function y(n){return(y=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(n)}function l(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function P(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function c(n,e,t){return e&&P(n.prototype,e),n}function o(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function j(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),e&&k(n,e)}function b(n){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(n)}function k(n,e){return(k=Object.setPrototypeOf||function(t,r){return t.__proto__=r,t})(n,e)}function x(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function M(n,e){return!e||typeof e!="object"&&typeof e!="function"?x(n):e}var w=function(){function n(e){l(this,n),o(this,"handlers",void 0),this.handlers=e.slice(0)}return c(n,[{key:"addHandlers",value:function(e){for(var t=this.handlers.slice(0),r=e.length,a=0;a<r;a+=1)t.push(e[a]);return new n(t)}},{key:"dispatchEvent",value:function(e,t){var r=this.handlers.length-1;if(t){for(var a=r;a>=0;a-=1)this.handlers[a].called||(this.handlers[a].called=!0,this.handlers[a](e));for(var s=r;s>=0;s-=1)this.handlers[s].called=!1}else(0,this.handlers[r])(e)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(e){for(var t=[],r=this.handlers.length,a=0;a<r;a+=1){var s=this.handlers[a];e.indexOf(s)===-1&&t.push(s)}return new n(t)}}]),n}();function E(n){var e=new Map;return n.forEach(function(t,r){e.set(r,t)}),e}function H(n){return Array.isArray(n)?n:[n]}var C=function(n){return n!==null&&y(n)==="object"&&n.hasOwnProperty("current")};function _(n){return n==="document"?document:n==="window"?window:C(n)?n.current||document:n||document}var d=function(){function n(e,t){l(this,n),o(this,"handlerSets",void 0),o(this,"poolName",void 0),this.handlerSets=t,this.poolName=e}return c(n,[{key:"addHandlers",value:function(e,t){var r=E(this.handlerSets);if(r.has(e)){var a=r.get(e);r.set(e,a.addHandlers(t))}else r.set(e,new w(t));return new n(this.poolName,r)}},{key:"dispatchEvent",value:function(e,t){var r=this.handlerSets.get(e),a=this.poolName==="default";r&&r.dispatchEvent(t,a)}},{key:"hasHandlers",value:function(e){if(!e)return this.handlerSets.size>0;var t=this.handlerSets.get(e);return!!t&&t.hasHandlers()}},{key:"removeHandlers",value:function(e,t){var r=E(this.handlerSets);if(!r.has(e))return new n(this.poolName,r);var a=r.get(e).removeHandlers(t);return a.hasHandlers()?r.set(e,a):r.delete(e),new n(this.poolName,r)}}]),n}();o(d,"createByType",function(n,e,t){var r=new Map;return r.set(e,new w(t)),new d(n,r)});var R=function(){function n(e){var t=this;l(this,n),o(this,"handlers",new Map),o(this,"pools",new Map),o(this,"target",void 0),o(this,"createEmitter",function(r){return function(a){t.pools.forEach(function(s){s.dispatchEvent(r,a)})}}),this.target=e}return c(n,[{key:"addHandlers",value:function(e,t,r){if(this.pools.has(e)){var a=this.pools.get(e);this.pools.set(e,a.addHandlers(t,r))}else this.pools.set(e,d.createByType(e,t,r));this.handlers.has(t)||this.addTargetHandler(t)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(e,t,r){if(this.pools.has(e)){var a=this.pools.get(e).removeHandlers(t,r);a.hasHandlers()?this.pools.set(e,a):this.pools.delete(e);var s=!1;this.pools.forEach(function(i){return s=s||i.hasHandlers(t)}),s||this.removeTargetHandler(t)}}},{key:"addTargetHandler",value:function(e){var t=this.createEmitter(e);this.handlers.set(e,t),this.target.addEventListener(e,t,!0)}},{key:"removeTargetHandler",value:function(e){this.handlers.has(e)&&(this.target.removeEventListener(e,this.handlers.get(e),!0),this.handlers.delete(e))}}]),n}(),q=function(){function n(){var e=this;l(this,n),o(this,"targets",new Map),o(this,"getTarget",function(t){var r=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],a=_(t);if(e.targets.has(a))return e.targets.get(a);if(!r)return null;var s=new R(a);return e.targets.set(a,s),s}),o(this,"removeTarget",function(t){e.targets.delete(_(t))})}return c(n,[{key:"sub",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(u.canUseDOM){var a=r.target,s=a===void 0?document:a,i=r.pool,g=i===void 0?"default":i;this.getTarget(s).addHandlers(g,e,H(t))}}},{key:"unsub",value:function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(u.canUseDOM){var a=r.target,s=a===void 0?document:a,i=r.pool,g=i===void 0?"default":i,m=this.getTarget(s,!1);m&&(m.removeHandlers(g,e,H(t)),m.hasHandlers()||this.removeTarget(s))}}}]),n}(),p=new q,v=function(n){function e(){return l(this,e),M(this,b(e).apply(this,arguments))}return j(e,T.PureComponent),c(e,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(t){this.unsubscribe(t),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(t){var r=t.name,a=t.on,s=t.pool,i=t.target;p.sub(r,a,{pool:s,target:i})}},{key:"unsubscribe",value:function(t){var r=t.name,a=t.on,s=t.pool,i=t.target;p.unsub(r,a,{pool:s,target:i})}},{key:"render",value:function(){return null}}]),e}();return o(v,"defaultProps",{pool:"default",target:"document"}),v.propTypes={},h.instance=p,h.default=v,h}var O;function U(){if(O)return f.exports;O=1;var u;return u=L(),f.exports=u.default,f.exports.instance=u.instance,f.exports}var A=U();const W=N(A);export{W as E};
